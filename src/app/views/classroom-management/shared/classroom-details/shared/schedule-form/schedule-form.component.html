<div class="max-w-2xl h-auto mx-auto p-2">
    <form [formGroup]="scheduleForm" (ngSubmit)="onSubmit()" class="space-y-4">
        <div>
            <label for="professor" class="block text-sm font-medium text-gray-700 mb-1">Profesor</label>
            <select id="professor" formControlName="professor"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                <option value="">Seleccione un profesor</option>
                @for (professor of professors; track $index) {
                <option [ngValue]="professor">{{ professor.name }}</option>
                }
            </select>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Días de la semana</label>
            <div class="grid grid-cols-5 gap-2">
                <button type="button" (click)="toggleDay('Lunes')" [ngClass]="{
                        'bg-blue-600 text-white': isDaySelected('Lunes'),
                        'bg-white text-gray-700 border-gray-300': !isDaySelected('Lunes')
                    }" class="px-2 py-1.5 text-xs font-medium border rounded-md flex items-center justify-center 
                    hover:bg-blue-50 hover:text-blue-600 
                    focus:outline-none focus:ring-2 focus:ring-blue-500 
                    transition-all duration-200 ease-in-out">
                    LUN
                </button>
                <button type="button" (click)="toggleDay('Martes')" [ngClass]="{
                        'bg-blue-600 text-white': isDaySelected('Martes'),
                        'bg-white text-gray-700 border-gray-300': !isDaySelected('Martes')
                    }" class="px-2 py-1.5 text-xs font-medium border rounded-md flex items-center justify-center 
                    hover:bg-blue-50 hover:text-blue-600 
                    focus:outline-none focus:ring-2 focus:ring-blue-500 
                    transition-all duration-200 ease-in-out">
                    MAR
                </button>
                <button type="button" (click)="toggleDay('Miércoles')" [ngClass]="{
                        'bg-blue-600 text-white': isDaySelected('Miércoles'),
                        'bg-white text-gray-700 border-gray-300': !isDaySelected('Miércoles')
                    }" class="px-2 py-1.5 text-xs font-medium border rounded-md flex items-center justify-center 
                    hover:bg-blue-50 hover:text-blue-600 
                    focus:outline-none focus:ring-2 focus:ring-blue-500 
                    transition-all duration-200 ease-in-out">
                    MIE
                </button>
                <button type="button" (click)="toggleDay('Jueves')" [ngClass]="{
                        'bg-blue-600 text-white': isDaySelected('Jueves'),
                        'bg-white text-gray-700 border-gray-300': !isDaySelected('Jueves')
                    }" class="px-2 py-1.5 text-xs font-medium border rounded-md flex items-center justify-center 
                    hover:bg-blue-50 hover:text-blue-600 
                    focus:outline-none focus:ring-2 focus:ring-blue-500 
                    transition-all duration-200 ease-in-out">
                    JUE
                </button>
                <button type="button" (click)="toggleDay('Viernes')" [ngClass]="{
                        'bg-blue-600 text-white': isDaySelected('Viernes'),
                        'bg-white text-gray-700 border-gray-300': !isDaySelected('Viernes')
                    }" class="px-2 py-1.5 text-xs font-medium border rounded-md flex items-center justify-center 
                    hover:bg-blue-50 hover:text-blue-600 
                    focus:outline-none focus:ring-2 focus:ring-blue-500 
                    transition-all duration-200 ease-in-out">
                    VIE
                </button>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4">
            <div>
                <label for="startTime" class="block text-sm font-medium text-gray-700 mb-1">Hora de inicio</label>
                <input type="time" id="startTime" formControlName="startTime"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div>
                <label for="endTime" class="block text-sm font-medium text-gray-700 mb-1">Hora de fin</label>
                <input type="time" id="endTime" formControlName="endTime"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                @if (scheduleForm.errors?.['timeConflict']) {
                <div class="text-red-500 text-sm mt-1">
                    La hora de fin debe ser posterior a la hora de inicio
                </div>
                }
            </div>
        </div>

        <div class="flex justify-end space-x-3 pt-4">
            <button type="submit" [disabled]="scheduleForm.invalid"
                class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed">
                {{ scheduleId ? 'Actualizar' : 'Crear' }}
            </button>
        </div>
    </form>
</div>